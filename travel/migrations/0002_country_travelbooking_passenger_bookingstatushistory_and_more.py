# Generated by Django 5.2.6 on 2025-09-30 12:43

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0004_profile_address_profile_bio_profile_city_and_more'),
        ('travel', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Country',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=3, unique=True)),
                ('continent', models.CharField(blank=True, max_length=50)),
            ],
            options={
                'verbose_name': 'Pays',
                'verbose_name_plural': 'Pays',
            },
        ),
        migrations.CreateModel(
            name='TravelBooking',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('destination', models.CharField(max_length=100)),
                ('ville_depart', models.CharField(max_length=100)),
                ('ville_arrivee', models.CharField(max_length=100)),
                ('aller_retour', models.BooleanField(default=False)),
                ('date_depart', models.DateField()),
                ('date_retour', models.DateField(blank=True, null=True)),
                ('travel_class', models.CharField(choices=[('economy', 'Économique'), ('business', 'Business'), ('first', 'Première')], default='economy', max_length=20)),
                ('nombre_passagers', models.PositiveIntegerField(default=1)),
                ('statut', models.CharField(choices=[('draft', 'Brouillon'), ('pending_payment', 'En attente de paiement'), ('processing', 'En cours de traitement'), ('payment_validated', 'Paiement validé'), ('pending_agent_validation', 'En attente de validation agent'), ('confirmed', 'Confirmée'), ('ticket_sent', 'Billet envoyé'), ('cancelled', 'Annulée')], default='draft', max_length=30)),
                ('draft_form_data', models.JSONField(blank=True, null=True, verbose_name='Données du formulaire (brouillon)')),
                ('draft_passengers', models.JSONField(blank=True, null=True, verbose_name='Passagers (brouillon)')),
                ('draft_documents', models.JSONField(blank=True, null=True, verbose_name='Documents (brouillon)')),
                ('billet_pdf', models.FileField(blank=True, null=True, upload_to='billets/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('procedure_duration_days', models.PositiveIntegerField(default=0, verbose_name='Durée de procédure (jours)')),
                ('procedure_start_date', models.DateTimeField(blank=True, null=True, verbose_name='Date début procédure')),
                ('procedure_end_date', models.DateTimeField(blank=True, null=True, verbose_name='Date fin procédure')),
                ('assigned_agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_bookings', to=settings.AUTH_USER_MODEL, verbose_name='Agent assigné')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='travel_bookings', to='core.client')),
            ],
        ),
        migrations.CreateModel(
            name='Passenger',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100)),
                ('prenom', models.CharField(max_length=100)),
                ('date_naissance', models.DateField()),
                ('sexe', models.CharField(choices=[('male', 'Homme'), ('female', 'Femme'), ('other', 'Autre')], max_length=10)),
                ('nationalite', models.CharField(max_length=100)),
                ('numero_passeport', models.CharField(max_length=50)),
                ('expiration_passeport', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='passengers', to='travel.travelbooking')),
            ],
        ),
        migrations.CreateModel(
            name='BookingStatusHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('statut', models.CharField(max_length=30)),
                ('date', models.DateTimeField(auto_now_add=True)),
                ('notes', models.TextField(blank=True)),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='status_history', to='travel.travelbooking')),
            ],
        ),
        migrations.CreateModel(
            name='TravelDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type', models.CharField(choices=[('passport', 'Passeport'), ('visa', 'Visa'), ('other', 'Autre')], max_length=20)),
                ('fichier', models.FileField(upload_to='travel_documents/')),
                ('statut', models.CharField(choices=[('pending', 'En attente'), ('approved', 'Approuvé'), ('rejected', 'Rejeté')], default='pending', max_length=20)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='travel.travelbooking')),
            ],
        ),
        migrations.CreateModel(
            name='VisaApplication',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('application_number', models.CharField(blank=True, max_length=50, unique=True, verbose_name='Numéro de demande')),
                ('priority', models.CharField(choices=[('normal', 'Normal'), ('express', 'Express (+50%)'), ('urgent', 'Urgent (+100%)')], default='normal', max_length=10, verbose_name='Priorité')),
                ('first_name', models.CharField(default='', max_length=100, verbose_name='Prénom')),
                ('middle_name', models.CharField(blank=True, default='', max_length=100, verbose_name='Deuxième prénom')),
                ('last_name', models.CharField(default='', max_length=100, verbose_name='Nom')),
                ('gender', models.CharField(choices=[('male', 'Homme'), ('female', 'Femme'), ('other', 'Autre')], default='other', max_length=10, verbose_name='Genre')),
                ('date_of_birth', models.DateField(blank=True, null=True, verbose_name='Date de naissance')),
                ('place_of_birth', models.CharField(default='', max_length=100, verbose_name='Lieu de naissance')),
                ('nationality', models.CharField(default='', max_length=100, verbose_name='Nationalité')),
                ('other_nationality', models.CharField(blank=True, default='', max_length=100, verbose_name='Autre nationalité')),
                ('current_address', models.TextField(default='', verbose_name='Adresse actuelle')),
                ('city', models.CharField(default='', max_length=100, verbose_name='Ville')),
                ('state', models.CharField(blank=True, default='', max_length=100, verbose_name='État/Région')),
                ('postal_code', models.CharField(default='', max_length=20, verbose_name='Code postal')),
                ('phone_number', models.CharField(default='', max_length=20, verbose_name='Téléphone')),
                ('alternate_phone', models.CharField(blank=True, default='', max_length=20, verbose_name='Téléphone secondaire')),
                ('email', models.EmailField(default='', max_length=254, verbose_name='Email')),
                ('passport_number', models.CharField(default='', max_length=50, verbose_name='Numéro de passeport')),
                ('passport_issue_date', models.DateField(blank=True, null=True, verbose_name="Date d'émission")),
                ('passport_expiry_date', models.DateField(blank=True, null=True, verbose_name="Date d'expiration")),
                ('passport_issue_place', models.CharField(default='', max_length=100, verbose_name="Lieu d'émission")),
                ('marital_status', models.CharField(choices=[('single', 'Célibataire'), ('married', 'Marié(e)'), ('divorced', 'Divorcé(e)'), ('widowed', 'Veuf/Veuve'), ('separated', 'Séparé(e)'), ('domestic_partnership', 'Union libre')], default='single', max_length=20, verbose_name='État civil')),
                ('spouse_name', models.CharField(blank=True, default='', max_length=200, verbose_name='Nom du conjoint')),
                ('spouse_nationality', models.CharField(blank=True, default='', max_length=100, verbose_name='Nationalité du conjoint')),
                ('spouse_passport_number', models.CharField(blank=True, default='', max_length=50, verbose_name='Passeport du conjoint')),
                ('number_of_children', models.PositiveIntegerField(default=0, verbose_name="Nombre d'enfants")),
                ('purpose_of_visit', models.TextField(default='', verbose_name='Motif du voyage')),
                ('intended_date_of_arrival', models.DateField(blank=True, null=True, verbose_name="Date d'arrivée prévue")),
                ('intended_date_of_departure', models.DateField(blank=True, null=True, verbose_name='Date de départ prévue')),
                ('length_of_stay_days', models.PositiveIntegerField(blank=True, null=True, verbose_name='Durée du séjour (jours)')),
                ('entry_port', models.CharField(blank=True, default='', max_length=100, verbose_name="Point d'entrée")),
                ('accommodation_type', models.CharField(blank=True, choices=[('hotel', 'Hôtel'), ('friends_family', 'Famille/Amis'), ('rental', 'Location'), ('other', 'Autre')], max_length=20, verbose_name="Type d'hébergement")),
                ('accommodation_name', models.CharField(blank=True, max_length=200, verbose_name="Nom de l'hébergement")),
                ('accommodation_address', models.TextField(blank=True, verbose_name="Adresse de l'hébergement")),
                ('accommodation_contact', models.CharField(blank=True, max_length=100, verbose_name='Contact sur place')),
                ('accommodation_phone', models.CharField(blank=True, max_length=20, verbose_name="Téléphone de l'hébergement")),
                ('occupation_type', models.CharField(choices=[('employed', 'Employé(e)'), ('self_employed', 'Indépendant(e)'), ('student', 'Étudiant(e)'), ('retired', 'Retraité(e)'), ('unemployed', 'Sans emploi'), ('other', 'Autre')], default='other', max_length=20, verbose_name='Statut professionnel')),
                ('occupation', models.CharField(default='', max_length=100, verbose_name='Profession')),
                ('employer_name', models.CharField(blank=True, default='', max_length=200, verbose_name="Nom de l'employeur")),
                ('employer_address', models.TextField(blank=True, default='', verbose_name="Adresse de l'employeur")),
                ('employer_phone', models.CharField(blank=True, default='', max_length=20, verbose_name="Téléphone de l'employeur")),
                ('job_title', models.CharField(blank=True, default='', max_length=100, verbose_name='Poste occupé')),
                ('monthly_income', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Revenu mensuel')),
                ('education_level', models.CharField(blank=True, choices=[('primary', 'École primaire'), ('secondary', 'École secondaire'), ('high_school', 'Lycée'), ('bachelor', 'Licence'), ('master', 'Master'), ('phd', 'Doctorat'), ('other', 'Autre')], max_length=20, verbose_name="Niveau d'études")),
                ('education_field', models.CharField(blank=True, max_length=100, verbose_name="Domaine d'études")),
                ('institution_name', models.CharField(blank=True, max_length=200, verbose_name='Établissement')),
                ('has_visited_before', models.BooleanField(default=False, verbose_name='A déjà visité le pays')),
                ('previous_visa_refusals', models.BooleanField(default=False, verbose_name='Refus de visa antérieur')),
                ('refusal_details', models.TextField(blank=True, verbose_name='Détails des refus')),
                ('criminal_record', models.BooleanField(default=False, verbose_name='Antécédents judiciaires')),
                ('criminal_record_details', models.TextField(blank=True, verbose_name='Détails des antécédents')),
                ('emergency_contact_name', models.CharField(default='', max_length=200, verbose_name="Contact d'urgence")),
                ('emergency_relationship', models.CharField(default='', max_length=50, verbose_name='Lien de parenté')),
                ('emergency_phone', models.CharField(default='', max_length=20, verbose_name="Téléphone d'urgence")),
                ('emergency_email', models.EmailField(blank=True, default='', max_length=254, verbose_name="Email d'urgence")),
                ('emergency_address', models.TextField(default='', verbose_name="Adresse du contact d'urgence")),
                ('status', models.CharField(choices=[('draft', 'Brouillon'), ('submitted', 'Soumis'), ('payment_pending', 'Paiement en attente'), ('payment_received', 'Paiement reçu'), ('under_review', "En cours d'examen"), ('additional_info_required', 'Informations complémentaires requises'), ('document_verification', 'Vérification des documents'), ('biometrics_required', "Prise d'empreintes requise"), ('interview_required', 'Entretien requis'), ('approved', 'Approuvé'), ('rejected', 'Refusé'), ('embassy_submitted', "Soumis à l'ambassade"), ('visa_processing', 'Traitement par les autorités'), ('visa_printed', 'Visa imprimé'), ('ready_for_pickup', 'Prêt à être retiré'), ('delivered', 'Livré'), ('completed', 'Terminé'), ('cancelled', 'Annulé'), ('expired', 'Expiré')], default='draft', max_length=30, verbose_name='Statut')),
                ('current_step', models.PositiveIntegerField(default=1, verbose_name='Étape en cours')),
                ('submitted_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de soumission')),
                ('payment_received_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de paiement')),
                ('under_review_at', models.DateTimeField(blank=True, null=True, verbose_name="Début de l'examen")),
                ('additional_info_requested_at', models.DateTimeField(blank=True, null=True, verbose_name="Demande d'information")),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name="Date d'approbation")),
                ('rejected_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de rejet')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de finalisation')),
                ('internal_notes', models.TextField(blank=True, verbose_name='Notes internes')),
                ('rejection_reason', models.TextField(blank=True, verbose_name='Motif du rejet')),
                ('application_fee', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Frais de dossier')),
                ('processing_fee', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Frais de traitement')),
                ('express_fee', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Frais express')),
                ('total_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Montant total')),
                ('payment_method', models.CharField(blank=True, max_length=50, verbose_name='Méthode de paiement')),
                ('payment_status', models.CharField(default='pending', max_length=20, verbose_name='Statut du paiement')),
                ('payment_reference', models.CharField(blank=True, max_length=100, verbose_name='Référence de paiement')),
                ('is_self_application', models.BooleanField(default=True, verbose_name='Démarche personnelle')),
                ('representative_name', models.CharField(blank=True, max_length=200, verbose_name='Nom du représentant')),
                ('representative_contact', models.CharField(blank=True, max_length=100, verbose_name='Contact du représentant')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière mise à jour')),
                ('applicant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visa_applications', to='core.client', verbose_name='Demandeur')),
                ('assigned_agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_applications', to=settings.AUTH_USER_MODEL, verbose_name='Agent assigné')),
                ('country', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='residence_applications', to='travel.country', verbose_name='Pays de résidence')),
                ('country_of_birth', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='birth_applications', to='travel.country', verbose_name='Pays de naissance')),
                ('passport_issue_country', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='passport_issue_applications', to='travel.country', verbose_name="Pays d'émission")),
            ],
            options={
                'verbose_name': 'Demande de visa',
                'verbose_name_plural': 'Demandes de visa',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='travelbooking',
            name='visa_application',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='travel.visaapplication'),
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('payment_type', models.CharField(choices=[('travel_booking', 'Réservation de vol'), ('visa_application', 'Demande de visa'), ('service', 'Service')], max_length=20, verbose_name='Type de paiement')),
                ('reference', models.CharField(max_length=100, unique=True, verbose_name='Référence de paiement')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Montant')),
                ('currency', models.CharField(default='EUR', max_length=3, verbose_name='Devise')),
                ('payment_method', models.CharField(choices=[('card', 'Carte bancaire'), ('bank_transfer', 'Virement bancaire'), ('paypal', 'PayPal'), ('cash', 'Espèces'), ('mobile_money', 'Mobile Money')], max_length=20, verbose_name='Méthode de paiement')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('processing', 'En cours'), ('completed', 'Terminé'), ('failed', 'Échec'), ('cancelled', 'Annulé'), ('refunded', 'Remboursé')], default='pending', max_length=20, verbose_name='Statut')),
                ('transaction_id', models.CharField(blank=True, max_length=100, verbose_name='ID de transaction')),
                ('payment_gateway', models.CharField(blank=True, max_length=50, verbose_name='Passerelle de paiement')),
                ('card_last_four', models.CharField(blank=True, max_length=4, verbose_name='4 derniers chiffres')),
                ('card_brand', models.CharField(blank=True, max_length=20, verbose_name='Marque de carte')),
                ('initiated_at', models.DateTimeField(auto_now_add=True, verbose_name="Date d'initiation")),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Date de completion')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière mise à jour')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='core.client', verbose_name='Utilisateur')),
                ('travel_booking', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payments', to='travel.travelbooking')),
                ('visa_application', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payments', to='travel.visaapplication')),
            ],
            options={
                'verbose_name': 'Paiement',
                'verbose_name_plural': 'Paiements',
                'ordering': ['-initiated_at'],
            },
        ),
        migrations.CreateModel(
            name='Appointment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reason', models.CharField(choices=[('visa', 'Demande de visa'), ('booking', 'Réservation de voyage'), ('other', 'Autre')], max_length=20, verbose_name='Motif')),
                ('date', models.DateTimeField(verbose_name='Date du rendez-vous')),
                ('message', models.TextField(verbose_name='Message pour le client')),
                ('location', models.CharField(choices=[('agency', 'Agence'), ('embassy', 'Ambassade')], max_length=20, verbose_name='Lieu')),
                ('required_documents', models.JSONField(default=list, verbose_name='Documents requis')),
                ('status', models.CharField(choices=[('unread', 'Non lu'), ('read', 'Lu'), ('canceled', 'Annulé'), ('postponed', 'Reporté')], default='unread', max_length=20, verbose_name='Statut')),
                ('new_date', models.DateTimeField(blank=True, null=True, verbose_name='Nouvelle date (si reporté)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Dernière mise à jour')),
                ('agent', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_appointments', to=settings.AUTH_USER_MODEL, verbose_name='Agent')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='appointments', to='core.client', verbose_name='Client')),
                ('travel_booking', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='appointments', to='travel.travelbooking')),
                ('visa_application', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='appointments', to='travel.visaapplication')),
            ],
            options={
                'verbose_name': 'Rendez-vous',
                'verbose_name_plural': 'Rendez-vous',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='ApplicationHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('created', 'Créé'), ('submitted', 'Soumis'), ('status_changed', 'Statut modifié'), ('document_uploaded', 'Document téléversé'), ('document_reviewed', 'Document examiné'), ('notes_added', 'Notes ajoutées'), ('assigned', 'Assigné à un agent'), ('approved', 'Approuvé'), ('rejected', 'Rejeté')], max_length=30)),
                ('old_status', models.CharField(blank=True, max_length=30)),
                ('new_status', models.CharField(blank=True, max_length=30)),
                ('notes', models.TextField(blank=True)),
                ('performed_at', models.DateTimeField(auto_now_add=True)),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='history', to='travel.visaapplication')),
            ],
            options={
                'verbose_name': 'Historique de demande',
                'verbose_name_plural': 'Historiques de demande',
                'ordering': ['-performed_at'],
            },
        ),
        migrations.CreateModel(
            name='VisaType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Nom du visa')),
                ('code', models.CharField(blank=True, max_length=20, null=True, unique=True, verbose_name='Code du visa')),
                ('category', models.CharField(choices=[('tourism', 'Tourisme'), ('business', 'Affaires'), ('student', 'Étudiant'), ('work', 'Travail'), ('family', 'Regroupement familial'), ('transit', 'Transit'), ('medical', 'Médical'), ('journalist', 'Journaliste'), ('diplomatic', 'Diplomatique'), ('official', 'Officiel'), ('investor', 'Investisseur'), ('retirement', 'Retraité'), ('other', 'Autre')], max_length=20, verbose_name='Catégorie')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('min_duration_days', models.PositiveIntegerField(default=1, verbose_name='Durée minimale (jours)')),
                ('max_duration_days', models.PositiveIntegerField(default=90, verbose_name='Durée maximale (jours)')),
                ('validity_days', models.PositiveIntegerField(default=180, help_text='Pendant combien de jours le visa est valide après émission', verbose_name='Validité du visa (jours)')),
                ('entry_type', models.CharField(choices=[('single', 'Entrée unique'), ('double', 'Double entrée'), ('multiple', 'Entrées multiples')], default='single', max_length=10, verbose_name="Type d'entrée")),
                ('min_processing_days', models.PositiveIntegerField(default=5, verbose_name='Délai minimum de traitement (jours)')),
                ('max_processing_days', models.PositiveIntegerField(default=30, verbose_name='Délai maximum de traitement (jours)')),
                ('fees', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Frais de dossier')),
                ('service_fee', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Frais de service')),
                ('currency', models.CharField(default='EUR', max_length=3, verbose_name='Devise')),
                ('is_evisa_available', models.BooleanField(default=False, verbose_name='e-Visa disponible')),
                ('is_visa_on_arrival', models.BooleanField(default=False, verbose_name="Visa à l'arrivée")),
                ('is_visa_waiver', models.BooleanField(default=False, verbose_name='Exemption de visa')),
                ('requires_biometrics', models.BooleanField(default=False, verbose_name='Empreintes digitales requises')),
                ('requires_medical_certificate', models.BooleanField(default=False, verbose_name='Certificat médical requis')),
                ('requires_police_clearance', models.BooleanField(default=False, verbose_name='Casier judiciaire requis')),
                ('requires_bank_statements', models.BooleanField(default=False, verbose_name='Relevés bancaires requis')),
                ('requires_employment_letter', models.BooleanField(default=False, verbose_name="Lettre d'emploi requise")),
                ('requires_hotel_booking', models.BooleanField(default=False, verbose_name='Réservation hôtelière requise')),
                ('requires_flight_itinerary', models.BooleanField(default=False, verbose_name='Itinéraire de vol requis')),
                ('requires_invitation_letter', models.BooleanField(default=False, verbose_name="Lettre d'invitation requise")),
                ('requires_travel_insurance', models.BooleanField(default=False, verbose_name='Assurance voyage requise')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('is_featured', models.BooleanField(default=False, verbose_name='Mis en avant')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de mise à jour')),
                ('country', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visa_types', to='travel.country', verbose_name='Pays')),
            ],
            options={
                'verbose_name': 'Type de visa',
                'verbose_name_plural': 'Types de visa',
                'unique_together': {('name', 'country')},
            },
        ),
        migrations.AddField(
            model_name='visaapplication',
            name='visa_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='travel.visatype', verbose_name='Type de visa'),
        ),
        migrations.CreateModel(
            name='RequiredDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_type', models.CharField(choices=[('passport', 'Passeport'), ('photo', "Photo d'identité"), ('birth_certificate', 'Acte de naissance'), ('marriage_certificate', 'Acte de mariage'), ('bank_statement', 'Relevé bancaire'), ('employment_letter', "Lettre d'emploi"), ('university_letter', 'Lettre universitaire'), ('medical_certificate', 'Certificat médical'), ('police_clearance', 'Casier judiciaire'), ('hotel_booking', 'Réservation hôtel'), ('flight_itinerary', 'Itinéraire de vol'), ('invitation_letter', "Lettre d'invitation"), ('property_deed', 'Titre de propriété'), ('tax_certificate', 'Certificat fiscal'), ('other', 'Autre')], max_length=30)),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('is_mandatory', models.BooleanField(default=True)),
                ('max_file_size_mb', models.PositiveIntegerField(default=10)),
                ('allowed_formats', models.CharField(default='pdf,jpg,jpeg,png', max_length=200)),
                ('visa_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='required_documents', to='travel.visatype')),
            ],
            options={
                'verbose_name': 'Document requis',
                'verbose_name_plural': 'Documents requis',
            },
        ),
        migrations.CreateModel(
            name='ApplicationDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(blank=True, null=True, upload_to='visa_documents/')),
                ('file_name', models.CharField(blank=True, max_length=255)),
                ('uploaded_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('submitted', 'Soumis'), ('approved', 'Approuvé'), ('rejected', 'Rejeté'), ('revision_required', 'Révision requise')], default='pending', max_length=20)),
                ('reviewer_notes', models.TextField(blank=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('required_document', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='travel.requireddocument')),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='travel.visaapplication')),
            ],
            options={
                'verbose_name': 'Document de demande',
                'verbose_name_plural': 'Documents de demande',
                'unique_together': {('application', 'required_document')},
            },
        ),
    ]
